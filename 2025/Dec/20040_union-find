#include <iostream>
using namespace std;

int parent[500001];

// 유니온 파인드
int getParent(int p) {
	if (parent[p] == p) return p;
	return parent[p] = getParent(parent[p]);
}

void unionParent(int p1, int p2) {
	int a = getParent(p1);
	int b = getParent(p2);
	
	if (a < b) parent[b] = a;
	else parent[a] = b;
}

int main() {
	int n, m; cin >> n >> m;
	
	int cycle = 0;
	
	for (int i = 0; i < n; i++) {
		parent[i] = i;
	}
	
	for (int i = 0; i < m; i++) {
		int p1, p2; cin >> p1 >> p2;
		
		// 부모가 같으면 사이클 존재
		if (getParent(p1) == getParent(p2)) {
			cycle = i + 1;
			break;
		}
		
		// 아니라면 간선을 이어줌
		unionParent(p1, p2);
	}
	
	cout << cycle;
}
